<!doctype html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta charset="utf-8">
        <title>http 跨域请求</title>
        <link rel="stylesheet" href="../css/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="../css/main.css">
        <style type="text/css">
            .task-list li{
                border-bottom:1px solid #CCC;
                line-height:26px;
            }
            .split-block{
                border:1px solid #ddd;
                border-radius:4px;
                padding:5px;
                margin:5px;
            }
        </style>
    </head>
    <body>
        <header class="container">
            <div class="row">
                <div class="col-xs-12 text-center">
                    <h3>http 跨域请求</h3>
                </div>
            </div>
        </header>
        <div class="out-box container">
            <div class="col-sm-2 nav-container">
                <div class="nav-slide bs-docs-sidebar">
                    <ul class="nav">
                        <li><a href="#">http 跨域请求</a></li>
                        <li><a href="#code1">代码实现(推荐)</a></li>
                        <li><a href="#code2">代码实现二</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-10 container">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label for="rc4-key" class="col-sm-2 control-label">地址：</label>
                        <div class="col-sm-8">
                            <div class="btn-group">
                                <input type="text" class="form-control url-address" placeholder="例如：http://www.baidu.com">
                                <span>
                                    <input type="button" class="btn btn-default get-content" value="获取">
                                </span>
                            </div>
                        </div>
                    </div>
                      <div class="form-group">
                          <div class="col-sm-8 col-sm-offset-2">
                                <textarea class="form-control page-content" style="height:600px"></textarea>
                          </div>
                          <div class="col-sm-8 col-sm-offset-2">
                              <div>预览：</div>
                              <div class="preview"></div>
                          </div>
                       </div>
                 </div>

                 <div class="row">
                     <a id="code1"></a>
                     <p class="col-sm-2 text-right">代码实现(推荐)：</p>
                     <div class="col-sm-8">
appcan.ready(function(){

//异步请求
appcan.use('request',function($,request){
    
    $('.get-content').tap(function(){
             var url = $('.url-address').val();
             alert(url);
             request.ajax({
                url:url,
                dataType:"text",
                type:"GET",
                success:function(dt){
                    $('.preview').html(dt);
                    $(".page-content").val(dt);
                }
            });
    });
});
});
                     </div>
                 </div>

                 <div class="row">
                     <a id="code2"></a>
                     <p class="col-sm-2 text-right">代码实现二：</p>
                     <div class="col-sm-8">    
   window.uexOnload = function(){
       var request = appcan.request;
       $('.get-content').tap(function(){
             var url = $('.url-address').val();
                 request.ajax({
                    url:url,
                    dataType:"text",
                    type:"GET",
                    success:function(dt){
                        $('.preview').html(dt);
                        $(".page-content").val(dt);
                    }
                });
        });
   };
                     </div>
                 </div>
            </div>
        </div>
        <script id="task-temp" type="text/appcan-template">
           <%for(var k in tasks){%>
               <li>
                   <span style="color:rgba(234,22,234,0.6);display:inline-block;padding-right:30px;">
                       <%-k%>
                   </span>
                   <span>
                       <% if(tasks[k].length > 40){ %>
                           <%-tasks[k].substr(0,40)+'...'%>
                       <%} else{%>
                           <%-tasks[k]%>
                       <%}%>
                   </span>
                   <button data-task-name="<%-k%>" type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
               </li>
           <%}%>
        </script>
        <script type="text/javascript" src="../../dist/appcan.js"></script>
        <script type="text/javascript" src="../js/main.js"></script>
        <script type="text/javascript">
        appcan.ready(function(){
            //异步请求
            appcan.use('request',function($,request){
                $('.get-content').tap(function(){
                         var url = $('.url-address').val();
                         request.ajax({
                            url:url,
                            dataType:"text",
                            type:"GET",
                            success:function(dt){
                                $('.preview').html(dt);
                                $(".page-content").val(dt);
                            }
                        });
                });
            });
        });
       /*
       window.uexOnload = function(){
           var request = appcan.request;
           $('.get-content').tap(function(){
                 var url = $('.url-address').val();
                     request.ajax({
                        url:url,
                        dataType:"text",
                        type:"GET",
                        success:function(dt){
                            $('.preview').html(dt);
                            $(".page-content").val(dt);
                        }
                    });
            });
       };
       */
            
        </script>
    </body>
</html>
