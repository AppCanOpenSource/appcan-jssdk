/*! appcan v1.0.0 Beta |  from 3g2win.com */appcan.define("slider",function(a,b,c){var d='<div class="slider-item ub-fh ub-fv ub-img1 <%=data.id%>" style="background-image:url(<%=data.img%>)">    <span class="uabs"><%=data.label%></span>    </div>',e='<div class="slider-item1 ub-fh ub-fv" style="position:relative;display:inline-block;font-size:1em;" id="<%=option.index%>">     <div id="note" style="white-space:normal;word-wrap:break-word;width:100%;height:100%;"><%=data.note%></div>     </div>',f=appcan.view.template(d),g=appcan.view.template(e);function h(){return"ontouchstart"in window?void 0:!0}var i;function j(b){appcan.extend(this,appcan.eventEmitter);var c=this;c.option=a.extend({selector:"body",dir:"hor",hasIndicator:!0,hasContent:!1,canDown:!1,hasCircle:!1,hasLabel:!1,aspectRatio:0,index:0,auto:!1},b,!0),this.isReset=!0,i=1,c.ele=a(c.option.selector),c.ele.css({"-webkit-transform":"translateZ(0)",transform:"translateZ(0)"}),c.option.aspectRatio&&c.ele.css("height",c.ele.offset().width*c.option.aspectRatio),c.option.data&&c.set(data),c.option.auto&&c.autoMove(c.option.auto)}j.prototype={buildItem:function(b){var c=this;if(c.option.hasContent){var d=a(g({data:b,option:c.option}));c.container.css("font-size","16px");var e=d.find('div[id="note"]');e.css(b.style)}else var d=a(f({data:b,option:c.option}));return d[0].lv_data=b,d},_moveTo:function(a,b){var c=this;b!==!1&&(c.container.addClass("slider-anim"),c.container.on("webkitTransitionEnd",function(){c.container.off("webkitTransitionEnd"),c.container.removeClass("slider-anim"),c.option.index>=c.option.itemCount&&(c.option.index=0),c.option.index<0&&(c.option.index=c.option.itemCount-1),c.emit("change",c,c.option.index),c._moveTo(c.option.index,!1),c.isReset=!0}));var d=-(c.option.index+1)*c.ele.offset().width;if(c.container.css("-webkit-transform","translateX("+d+"px)"),c.option.hasIndicator){var e=c.ele.offset().width/c.option.itemCount;c.focus.css("-webkit-transform","translateX("+c.option.index*e+"px)")}if(c.option.hasLabel&&c.label.html(c.option.data[c.option.index+1].label),c.option.hasCircle){var f=c.Circle.find('div[name="labContent"]'),a=c.option.index;a>c.option.itemCount&&(a=0);for(var g=0;g<f.length;g++)g==a?f[g].style.cssText="margin-right : .5em;float: left;padding: 0.25em;background-color: #ff8a00;border-radius: 50%;":f[g].style.cssText="margin-right : .5em;float: left;padding: 0.25em;background-color: #cfc1b0;border-radius: 50%;"}},drag:function(a){var b=this,c=-(b.option.index+1)*b.ele.offset().width+a;b.container.css("-webkit-transform","translateX("+c+"px)"),b.isReset=!1},reset:function(){var a=this;this.isReset||(a._moveTo(a.option.index),a.autoMove(a.option.auto))},set:function(b){var c=this;c.ele.children().remove(),c.option.itemCount=b.length,c.container=c.container||a('<div class="slider-group ub-fh ub-fv"></div>'),c.container.empty(),b.unshift(b[b.length-1]),b.push(b[1]),c.option.data=b;for(var d in b){var e=c.buildItem(b[d]);c.container.append(e)}c.ele.append(c.container);var f=c.ele.offset().width/c.option.itemCount;if(c.option.hasLabel&&(c.label=c.label||a('<div class="uinn1 ulev-1 ut-s label sc-text-hint"></div>'),c.ele.append(c.label)),c.option.hasCircle){c.Circle=a('<div class="label1" style="background-color:rgba(152, 139, 123, 0.5);height:1.5em;width: 100%;position: absolute;left: 0px;bottom: 0px;"></div>');for(var g=a('<div class="labelzan" style="margin:0 auto;top :.6em;right: .2em;"></div>'),h=a('<div class="labelcon1" name="labContent" style="margin-right : .5em;float: left;padding: 0.25em;background-color: #ff8a00;border-radius: 50%;"></div>'),j=a('<div class="labelcon" name="labContent"></div>'),k=0;k<c.option.itemCount;k++)g.append(0==k?h:'<div class="labelcon" name="labContent" style="margin-right : .5em;float: left;padding: 0.25em;background-color: #cfc1b0;border-radius: 50%;"></div>');"right"==c.option.site?g[0].style.cssText="margin-top:0.75em;margin-left:75%;":"left"==c.option.site&&(g[0].style.cssText="margin-top:0.75em;margin-left:0;"),g.css("width",c.option.itemCount+"em"),c.Circle.append(g),c.ele.append(c.Circle)}return c.option.hasIndicator&&(c.focus=c.focus||a('<div class="utra focus bc-head"></div>'),c.focus.css("width",f),c.focus.css("-webkit-transform","translateX("+c.option.index*f+"px)"),c.ele.append(c.focus)),c._moveTo(c.option.index,!1),c.ele.off("swipeMoveLeft").on("swipeMoveLeft",function(a){c.option.index<c.option.itemCount&&(c.timer&&clearInterval(c.timer),c.drag(-a._args.dx))}),c.ele.off("swipeMoveRight").on("swipeMoveRight",function(a){c.option.index>=0&&(c.timer&&clearInterval(c.timer),c.drag(a._args.dx))}),c.ele.off("touchend touchcancel").on("touchend touchcancel",function(a){c.reset()}),c.ele.off("tap").on("tap",function(a){c.emit("clickItem",c,c.option.index,b[c.option.index+1])}),c.ele.off("swipeLeft").on("swipeLeft",function(a){c.option.index<c.option.itemCount&&(c._moveTo(++c.option.index),c.autoMove(c.option.auto))}),c.ele.off("swipeRight").on("swipeRight",function(a){c.option.index>=0&&(c._moveTo(--c.option.index),c.autoMove(c.option.auto))}),c.ele.off("swipeUp").on("swipeUp",function(a){c._moveTo(c.option.index),c.autoMove(c.option.auto)}),c.ele.off("swipeDown").on("swipeDown",function(a){c._moveTo(c.option.index),c.autoMove(c.option.auto)}),a(document).on("touchstart",function(a){var b=c.ele.offset().left,d=c.ele.offset().top,e=c.ele.width(),f=c.ele.height();if(c.option.canDown){var g=a.touches[0];if(screenX1=g.screenX,screenY1=g.screenY,g.pageX>b&&g.pageX<b+e&&g.pageY>d&&g.pageY<d+f)return appcan.window.disableBounce(),appcan.window.setMultilPopoverFlippingEnbaled(1),!0;1==i&&appcan.window.enableBounce(),appcan.window.setMultilPopoverFlippingEnbaled(0)}else{var g=a.touches[0];if(g.pageX>b&&g.pageX<b+e&&g.pageY>d&&g.pageY<d+f)return appcan.window.disableBounce(),appcan.window.setMultilPopoverFlippingEnbaled(1),!1;1==i&&appcan.window.enableBounce(),appcan.window.setMultilPopoverFlippingEnbaled(0)}}),a(document).on("touchmove",function(a){var b=c.ele.offset().left,d=c.ele.offset().top,e=c.ele.width(),f=c.ele.height();if(c.option.canDown){var g=a.touches[0];if(screenX2=g.screenX,screenY2=g.screenY,g.pageX>b&&g.pageX<b+e&&g.pageY>d&&g.pageY<d+f){appcan.window.setMultilPopoverFlippingEnbaled(1),c.timer&&clearInterval(c.timer);function h(a,b){return 180*Math.atan2(b,a)/Math.PI}function i(a,b,c,d){var e=b-a,f=d-c,g=0;if(Math.abs(f)<2&&Math.abs(e)<2)return g;var i=h(f,e);return i>=-45&&45>i?g=4:i>=45&&135>i?g=1:i>=-135&&-45>i?g=2:(i>=135&&180>=i||i>=-180&&-135>i)&&(g=3),g}var j=i(screenX1,screenX2,screenY1,screenY2);return 3==j||4==j?(appcan.window.enableBounce(),!0):(appcan.window.disableBounce(),!1)}}else{var g=a.touches[0];if(g.pageX>b&&g.pageX<b+e&&g.pageY>d&&g.pageY<d+f)return appcan.window.disableBounce(),appcan.window.setMultilPopoverFlippingEnbaled(1),c.timer&&clearInterval(c.timer),!1}}),a(document).on("touchcancel",function(a){var b=c.ele.offset().left,d=c.ele.offset().top,e=c.ele.width(),f=c.ele.height();if(c.option.canDown){var g=a.touches[0];return 1==i&&appcan.window.enableBounce(),g.pageX>b&&g.pageX<b+e&&g.pageY>d&&g.pageY<d+f&&appcan.window.setMultilPopoverFlippingEnbaled(0),!1}appcan.window.setMultilPopoverFlippingEnbaled(0)}),a(document).on("touchend",function(a){var b=c.ele.offset().left,d=c.ele.offset().top,e=c.ele.width(),f=c.ele.height();if(c.option.canDown){var g=a.touches[0];return 1==i&&appcan.window.enableBounce(),g.pageX>b&&g.pageX<b+e&&g.pageY>d&&g.pageY<d+f&&appcan.window.setMultilPopoverFlippingEnbaled(0),!1}appcan.window.setMultilPopoverFlippingEnbaled(0)}),c},autoMove:function(a){if(a){var b=this;b.timer&&clearInterval(b.timer),b.timer=setInterval(function(){b._moveTo(++b.option.index,!0)},a)}}},c.exports=function(a){return new j(a)}});