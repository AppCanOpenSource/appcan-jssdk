<!doctype html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta charset="utf-8">
        <title>rc4 加解密测试</title>
        <link rel="stylesheet" href="../css/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="../css/main.css">
    </head>
    <body>
        <header class="container">
            <div class="row">
                <div class="col-xs-12 text-center">
                    <h3>rc4 加解密测试</h3>
                </div>
            </div>
        </header>
        <div class="out-box container">
            <div class="col-sm-2 nav-container">
                <div class="nav-slide bs-docs-sidebar">
                    <ul class="nav">
                        <li><a href="#">加解密</a></li>
                        <li><a href="#code1">代码实现(推荐)</a></li>
                        <li><a href="#code2">代码实现二</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-10 container">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label for="rc4-key" class="col-sm-2 control-label">加密的key:</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" value="123456789012345" id="rc4-key" placeholder="key">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rc4-key" class="col-sm-2 control-label">内容:</label>
                        <div class="col-sm-8">
                            <textarea class="form-control rc4-content" rows="3"></textarea>
                        </div>
                     </div>
                     <div class="form-group">
                         <label for="rc4-key" class="col-sm-2 control-label">结果:</label>
                         <div class="col-sm-8">
                             <textarea class="form-control rc4-res" rows="3"></textarea>
                         </div>
                      </div>
                      <div class="form-group">
                          <div class="col-sm-8 col-sm-offset-2">
                              <button class="btn btn-default ecrypt">加密</button>
                              <button class="btn btn-default decryption">解密</button>
                          </div>
                      </div>
                 </form>

                 <div class="row">
                     <a id="code1"></a>
                     <p class="col-sm-2 text-right">代码实现(推荐)：</p>
                     <div class="col-sm-8">
                         <pre>
 //使用appcan use 方法，回调有两个变量，一个是最常用的dom操作 推荐做法
 appcan.use('crypto',function($,crypto){
     var sbox = '';
     $('.ecrypt').click(function(){
         var key = $('#rc4-key').val();
         var content = $('.rc4-content').val();
         sbox = crypto.rc4.init(key);
         if(key && content){
             $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
         }else{
             alert('key 和 要加密的内容都不能为空！');
         }
     });

     $('.decryption').click(function(){
         var key = $('#rc4-key').val();
         if(!key){
             alert('请输入解密的key');
             return;
         }
         var content = $('.rc4-content').val();
         if(content){
             sbox = crypto.rc4.init(key);
             $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
         }else{
             alert('请输入要解密的内容！');
         }

     });

 });
                         </pre>
                     </div>
                 </div>

                 <div class="row">
                     <a id="code2"></a>
                     <p class="col-sm-2 text-right">代码实现二：</p>
                     <div class="col-sm-8">
                         <pre>
 //与zepto结合的使用方式，不推荐
 $(document).ready(function(){
     var crypto = appcan.crypto;
     var sbox = '';
     $('.ecrypt').click(function(){
         var key = $('#rc4-key').val();
         var content = $('.rc4-content').val();
         sbox = crypto.rc4.init(key);
         if(key && content){
             $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
         }else{
             alert('key 和 要加密的内容都不能为空！');
         }
         return false;
     });

     $('.decryption').click(function(){
         var key = $('#rc4-key').val();
         if(!key){
             alert('请输入解密的key');
             return;
         }
         var content = $('.rc4-content').val();
         if(content){
             sbox = crypto.rc4.init(key);
             $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
         }else{
             alert('请输入要解密的内容！');
         }
         return false;
     });

 });
                         </pre>
                     </div>
                 </div>
            </div>
        </div>
        <script type="text/javascript" src="../../dist/appcan.js"></script>
        <script type="text/javascript" src="../js/main.js"></script>
        <script type="text/javascript">
            //使用appcan use 方法，回调有两个变量，一个是最常用的dom操作 推荐做法

            appcan.use('crypto',function($,crypto){
                var sbox = '';
                $('.ecrypt').click(function(){
                    var key = $('#rc4-key').val();
                    var content = $('.rc4-content').val();
                    sbox = crypto.rc4.init(key);
                    if(key && content){
                        $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
                    }else{
                        alert('key 和 要加密的内容都不能为空！');
                    }
                    return false;
                });

                $('.decryption').click(function(){
                    var key = $('#rc4-key').val();
                    if(!key){
                        alert('请输入解密的key');
                        return;
                    }
                    var content = $('.rc4-content').val();
                    if(content){
                        sbox = crypto.rc4.init(key);
                        $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
                    }else{
                        alert('请输入要解密的内容！');
                    }
                    return false;
                });

            });

            //与zepto结合的使用方式，不推荐
            /*$(document).ready(function(){
                var crypto = appcan.crypto;
                var sbox = '';
                $('.ecrypt').click(function(){
                    var key = $('#rc4-key').val();
                    var content = $('.rc4-content').val();
                    sbox = crypto.rc4.init(key);
                    if(key && content){
                        $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
                    }else{
                        alert('key 和 要加密的内容都不能为空！');
                    }
                    return false;
                });

                $('.decryption').click(function(){
                    var key = $('#rc4-key').val();
                    if(!key){
                        alert('请输入解密的key');
                        return;
                    }
                    var content = $('.rc4-content').val();
                    if(content){
                        sbox = crypto.rc4.init(key);
                        $('.rc4-res').val(crypto.rc4.encrypt(content,sbox));
                    }else{
                        alert('请输入要解密的内容！');
                    }
                    return false;
                });

            });*/
        </script>
    </body>
</html>
